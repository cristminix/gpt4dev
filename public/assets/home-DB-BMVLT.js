import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                */import*as n from"@huggingface/hub";import{oauthHandleRedirectIfPresent as c,oauthLoginUrl as l}from"@huggingface/hub";localStorage.removeItem("backendUrl ");framework.connectToBackend(document.getElementById("connect_status"));const i=window.self!==window.top,s=document.querySelector("form a.button");i&&s.classList.remove("hidden");const m=document.querySelector("form"),a=document.querySelector('form input[name="token"]');async function u(){const t=a.value;if(!t)return!0;let o;try{o=await n.whoAmI({accessToken:t})}catch(r){return console.log(r),a.setCustomValidity("Invalid Access Token."),localStorage.removeItem("HuggingFace-api_key"),localStorage.getItem("oauth")&&(localStorage.removeItem("oauth"),window.location.href.replace((""+window.location.href).split("?")[0])),!1}return localStorage.setItem("HuggingFace-api_key",t),localStorage.setItem("user",o.name),localStorage.setItem("report_error","true"),!0}m.addEventListener("submit",async t=>{t.preventDefault(),await u()&&(window.location.href="chat/")});let e=localStorage.getItem("oauth");if(e){let t;try{e=JSON.parse(e),t=await n.whoAmI({accessToken:e.accessToken})}catch(o){console.error(o),e=null,localStorage.removeItem("oauth"),localStorage.removeItem("HuggingFace-api_key")}}e||=await c();e?(localStorage.setItem("oauth",JSON.stringify(e)),localStorage.setItem("HuggingFace-api_key",e.accessToken),localStorage.setItem("user",e.userInfo.fullname),document.getElementById("signout").style.removeProperty("display"),document.getElementById("signout").onclick=async function(){localStorage.removeItem("oauth"),localStorage.removeItem("HuggingFace-api_key"),window.location.href.replace((""+window.location.href).split("?")[0])}):(localStorage.removeItem("oauth"),document.getElementById("signin").style.removeProperty("display"),document.getElementById("signin").onclick=async function(){window.location.href=await l(window.oauthConfig)});
